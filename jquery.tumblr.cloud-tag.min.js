/**
*	Create cloud tag for your tumblr blog
**/$.fn.cloudTag=function(e){var t=$.extend({tumblrSite:location.hostname,showCount:!1,countDelimeterLeft:"(",countDelimeterRight:")",sortBy:"name"},e),n=this,r=0,i=0,s=function(){var e=0,s=20,u=[];$.ajaxSetup({cache:!1});prepareTags=function(e){var t=e.response.posts;for(var a=0;a<t.length;a++){var f=t[a].tags;for(var l=0;l<f.length;l++){var c=f[l];if(!JSON.stringify(u).match(c))u.push({name:c,count:1});else for(var h in u)u[h].name==c&&u[h].count++;i++}}s>=r?$(n).html(o(u)):s+=20};while(e<r){$.ajax({type:"GET",url:"http://api.tumblr.com/v2/blog/"+t.tumblrSite+"/posts",dataType:"jsonp",data:{api_key:t.apiKey,offset:e,jsonp:"prepareTags"}});e+=20}},o=function(e){t.sortBy=="count"?e.sort(function(e,t){return e.count>t.count?-1:e.count<t.count?1:e.name<t.name?-1:0}):t.sortBy=="name"&&e.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0});var n="";for(var r=0;r<e.length;r++){var i=e[r],s=i.name,o=i.count,u="";o<5?u="barely":o<12?u="sometimes":o<25?u="frequent":o<50?u="normal":u="always";var a=t.showCount?" "+t.countDelimeterLeft+o+t.countDelimeterRight:"";n+='<li><a href="/tagged/'+s.replace(/\s+/g,"-")+'" class="'+u+'">'+s+a+"</a></li>"}return n};$.ajaxSetup({cache:!1});getPosts=function(e){r=e.response.blog.posts;s()};$.ajax({type:"GET",url:"http://api.tumblr.com/v2/blog/"+t.tumblrSite+"/info",dataType:"jsonp",data:{api_key:t.apiKey,jsonp:"getPosts"}})};